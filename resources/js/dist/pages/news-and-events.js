"use strict";var ALL_NEWS,CURSOR;$(document).ready(function(){$.ajax({url:"/api/v1/news/get/all",method:"GET",success:function(a){a&&a.length&&init(a)},error:function(a){console.error(a)}}),$(window).scroll(function(){if(ALL_NEWS&&ALL_NEWS.length&&$(window).scrollTop()>=$(document).height()-$(window).height()-10&&CURSOR<ALL_NEWS.length){$(".spintro").remove();for(var a,b=Math.min(ALL_NEWS.length,CURSOR+20),c=CURSOR;c<b;c++)a=new NewsCard(ALL_NEWS[c],!1,"small-12"),$("#newsCardsWrapper").append(a.render());CURSOR=b}}),$.extend($.expr[":"],{containsi:function(a,b,c){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf((c[3]||"").toLowerCase())}});var a=debounce(function(a){a.preventDefault(),doneTyping()},400);$("#filter-news").on("keyup",a)});var init=function(a){ALL_NEWS=a;var b=new NewsCard(a[0],!0,"auto");if($("#featuredNewsCard1").append(b.render()),2<=a.length){var c=new NewsCard(a[1],!0,"auto");$("#featuredNewsCard2").append(c.render())}new Foundation.Interchange($("#featuredNewsCard1 .news-card, #featuredNewsCard2 .news-card")),CURSOR=Math.min(a.length,20);for(var d,e=2;e<CURSOR;e++)d=new NewsCard(a[e],!1,"small-12"),$("#newsCardsWrapper").append(d.render())},filterNews=function(a){if(ALL_NEWS&&ALL_NEWS.length&&CURSOR<ALL_NEWS.length){for(var b,c=ALL_NEWS.length,d=CURSOR;d<c;d++)b=new NewsCard(ALL_NEWS[d],!1,"small-12"),$("#newsCardsWrapper").append(b.render());CURSOR=c}$(".service-catalog-portfolio").find(".news-card.small-12").not(":containsi(\"".concat(a,"\")")).hide(),$(".service-catalog-portfolio").find(".news-card.auto").not(":containsi(\"".concat(a,"\")")).parents(".cell").hide()},doneTyping=function(){resetNewsFilter();var a=$("#filter-news").val().toLowerCase();"string"==typeof a&&a.length&&filterNews(a)},resetNewsFilter=function(){$(".service-catalog-portfolio").find(".news-card.auto").parents(".cell").show(),$("#featuredNewsCard1, #featuredNewsCard2, #newsCardsWrapper").children().remove(),init(ALL_NEWS)},debounce=function(a,b){var c;return function(){var d=arguments,e=this;clearTimeout(c),c=setTimeout(function(){return a.apply(e,d)},b)}};