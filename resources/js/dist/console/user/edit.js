"use strict";$(document).ready(function(){$("#permissions-table").DataTable({dom:"tr",paging:!1,searching:!0}),$("#permissions-table select.permission-level").change(function(){var a=$(this).children("option:checked").data("permissionlevelclass");$(this).removeClass(),$(this).addClass(["permission-level",a])}),$(".button-save").click(function(a){if(a.preventDefault(),$(a.currentTarget).hasClass("disabled"))return!1;var b=[];$("#permissions-table").find("select").each(function(){b.push({permissionID:$(this).data("permissionid"),permissionLevelID:$(this).val()})}).toArray(),$.ajax({url:$("#update-endpoint").val(),method:$("#update-method").val(),data:{admin:0<$("#isAdmin").length&&$("#isAdmin").is(":checked"),permissions:b},success:function(a){disableSave(),a.created?window.location.replace("/user/"+a.user.id):$("#toast-save-success").addClass("show")},error:function(){$("#toast-save-error").addClass("show")}})}),$(".user, .console-modal").on("keyup change paste",":input, [contenteditable=true]",function(){enableSave()})});var enableSave=function(){$(".button-save").removeClass("disabled")},disableSave=function(){$(".button-save").addClass("disabled")};