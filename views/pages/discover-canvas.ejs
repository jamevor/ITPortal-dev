<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <%- include('../partials/header.ejs'); %>
    <style>
      .heading-h1{
        color:var(--color-light)
      }
      .intro-text{
        color:var(--color-light);
        font-size:1.25em
      }
      .hero-link{
        padding: 1em;
        color: var(--color-light);
        border: 1px solid var(--color-light);  
        border-radius: 3px;
        margin: 1em 0;
        display: block;
        width: fit-content;
        transition: all .5s ease;
        background-color:var(--color-pop)
      }
      .hero-link:hover,.hero-link:focus{
        background-color:var(--color-pop-h);
        border: 1px solid var(--color-lane);
        color: var(--color-light);
      }
      .hero-img{
        background: url(//hub.wpi.edu/file-upload/f382de6e-b1ef-4e69-93e6-addf5afe9d95/06t162357186z);
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        box-shadow: inset 0 0 4px 0 rgba(0,0,0,.3);
      }
      .hero-text{
        padding: 2em;
        background: rgba(0,0,0,.5);
        box-shadow: 0 0 4px 0 rgba(0,0,0,.3);
        backdrop-filter: blur(8px);
      }
      .choice-button{
        padding: 1.5em;
        background-color:var(--color-pop);
        color: var(--color-light);
        border-radius: 3px;
        margin: 1em ;
        display: flex;
        transition: all .5s ease;
        justify-content: space-between;
        align-content: center;
        font-weight: 600;
        box-shadow: var(--shadow-standard-y);
        line-height: 1;
      }
      .choice-button:hover,.choice-button:focus{
        color: var(--color-light);
        background-color:var(--color-pop-h);
        box-shadow: var(--shadow-standard-y-h);
      }
      .choice-alt:hover,.choice-alt:focus{
        color: var(--color-lane-subtler);
      }
      .choice-alt{
        padding: 1.5em;
        color:var(--color-pop-h);
        transition: all .5s ease;
        text-decoration: underline;
        margin: 1em ;
        display: flex;
        justify-content: center;
        align-content: center;
        font-weight: 600;
        line-height: 1;
      }
    </style>
  </head>
  <%- include('../partials/layout/top.ejs'); %>
  <%- include('../partials/components/alert.ejs'); %>
  <div class="grid-container fluid swim-lane bg-pop hero-img">
    <div class="grid-container hero-text">
      <h1 class="heading-h1">Canvas Login</h1>
      <p class="intro-text">Canvas is our online information and learning portal providing access to course content, projects, campus organizations, and graduate & continuing education coursework.</p>
      <a class="hero-link" href="https://hub.wpi.edu/component/122/canvas" target="_blank">Learn more about Canvas</a>
    </div>

  </div>
  <div class="grid-container fluid swim-lane">
    <div class="grid-container">
      <div class="grid-x grid-margin-x">
        <div class="small-12 medium-12">
          <p>Please choose from the following options for accessing Canvas</p>
        </div>
        
        
        <div class="small-12 medium-auto">
          <a class="choice-button" href="https://canvas.wpi.edu/login/saml">I have a WPI email address <i class="fas fa-arrow-circle-right"></i></a>
          <% if (locals.user){ %>
            <p id="countown" style="margin-left: 1em;color: var(--color-bright-5);font-weight: 400;"><i class="fas fa-lightbulb-on"></i> Hello <%- locals.userAttributes.givenname%>! Automatically redirecting you to canvas in <span id="counter" style="font-weight: 600;">3</span> seconds</p>
          <% } %>
        </div>
        <% if (!locals.user){ %>
        <div class="small-12 medium-auto">
          <a class="choice-alt" href="https://canvas.wpi.edu/login/canvas">I do not have a WPI email address</a>
        </div>
        <% } %>
      </div>
    </div>
  </div>
<% if (locals.user){ %>
  <script>
    window.onload = function(){
      var counter = 3;
      var interval = setInterval(function() {
          counter--;
          document.getElementById("counter").innerHTML= counter;
          if (counter == 0) {
              clearInterval(interval);
              window.location.href = "https://canvas.wpi.edu/login/saml";
          }
      }, 900);
    }
  </script>
<% } %>
<%- include('../partials/layout/bottom.ejs'); %>
</html>