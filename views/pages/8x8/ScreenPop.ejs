<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Incoming Call</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather|Roboto:400,100,300,500,700,900">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Merriweather|Roboto:400,100,300,500,700,900" as="style">
    <style>
        body{
            margin:0;
            font-family: Roboto,Sans-Serif;
        }
        #loadWrapper{
            width:100vw;
            height: 100vh;
            display: flex;
            background: #f1f1f1;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        .loader {
            position: relative;
            width: 350px;
            height: 350px;
            border-radius: 50%;
            background: linear-gradient(cyan,magenta,yellow);
            animation: loaderPulse 3.2s linear infinite;
        }

        @keyframes loaderPulse {
            0% {
                transform: rotate(0deg) scale(1);
            }
            50% {
                transform: rotate(180deg) scale(.98);
            }
            100% {
                transform: rotate(360deg) scale(1);
            }
        }
        @keyframes loaderText {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(.98);
            }
            100% {
                transform: scale(1);
            }
        }


        .loader span {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(cyan,magenta,yellow);
        }

        .loader span:nth-child(1) {
            filter: blur(5px);
        }

        .loader span:nth-child(2) {
            filter: blur(10px);
        }

        .loader span:nth-child(3) {
            filter: blur(25px);
        }

        .loader span:nth-child(4) {
            filter: blur(50px);
        }

        .loader:after {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            background: #f1f1f1;
            border: solid white 10px;
            border-radius: 50%;
        }
        #loadingAnim{
            position: relative;
        }
        #loadingText{
            position: absolute;
            z-index: 99;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            font-weight: 500;
            color: #333;
            animation: loaderText 3.2s linear infinite;
        }
        #loadingTel{
            font-size: 3em;
            color:#f07e6e;
            font-weight: 500;
            margin-bottom: 1.5em;
        }
        

    </style>
</head>
<body>
    <%if(CallBody.Event == 'offered'){%>
    <div id="loadWrapper">
        <div id="loadingTel"><%=CallBody.ANI%></div>
        <div id="loadingAnim">
            <div id="loadingText">Incoming...</div>
            <div class="loader">
                <span></span><span></span><span></span><span></span>
            </div>
       </div>
    </div>
    <%}%>
    <%if(CallBody.Event == 'accepted'){%>
        <div id="loadWrapper">
            <div id="loadingTel"><%=CallBody.ANI%></div>
            <div id="loadingAnim">
                <div id="loadingText">Incoming...</div>
                <div class="loader">
                    <span></span><span></span><span></span><span></span>
                </div>
           </div>
        </div>
        <%}%>
    <div style="display:none">
        <h1>The Body ody ody</h1>
        <h2>Body</h2>
        <pre>
            <%=JSON.stringify(CallBody,null,2)%>
        </pre>
        <h2>Existing</h2>
        <pre>
            <%=JSON.stringify(ExistingInteraction,null,2)%>
        </pre>
        <h2>Call Record</h2>
        <pre>
            <%=JSON.stringify(CallRecord,null,2)%>
        </pre>
    </div>
</body>
</html>