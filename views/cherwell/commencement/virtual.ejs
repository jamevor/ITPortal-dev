<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
  <%- include('../../partials/header.ejs'); %>


  <style>
    pre{
      max-height:400px;
    }
    .help-form label {
    font-weight: 600;
  }
  .help-form .box {
    background: var(--color-lane);
    padding: 0.5em 1em;
  }
  .help-form textarea {
    min-width:100%;
  }
  .help-form input, .help-form textarea {
    background: var(--color-body);
    color: var(--color-body-text);
    margin-bottom:.75em;
  }
  .night .help-form input:focus, .night .help-form textarea:focus {
    background: var(--color-lane-subtler);
  }
  .help-form .button-submit {
    width: 100%;
    text-align: center;
    background: var(--color-pop);
    height: 3em;
    color: var(--color-light);
    cursor: pointer;
    outline: none;
    box-shadow: var(--shadow-standard-y);
    transition: background .5s ease;
  }
  .help-form .button-submit:hover {
    background: var(--color-pop-h);
  }
  .help-form .button-submit.disabled, .help-form .button-submit.disabled:hover{
    cursor: not-allowed;
    background: var(--color-lane);
    color: var(--color-lane-subtler);
  }

  .help-form .impact-boxes .cell input {
    display: none;
  }
  .help-form .impact-boxes .cell{
    display:flex;
  }
  .help-form .impact-boxes .cell label {
    border: 1px solid var(--color-lane);
    padding: 1em .5em;
    text-align: center;
    margin: .5em 0;
    width: 100%;
    transition: all .5s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    line-height: 1.1;

  }
   .box-verified-info{
    overflow:hidden;
   }
  .help-form label i{
    font-size: 2em;
    color: var(--color-lane-subtle);
    margin-bottom: .25em;
  }
  .help-form label .label2{
    font-weight: 400;
    color:var(--color-body-subtitle);
  }
  .help-form .impact-boxes .cell input:checked + label {
    background-color: var(--color-pop);
    color: var(--color-light);
    border-color: var(--color-pop-h);
  }
  .help-form .impact-boxes .cell input:checked + label .label2{
    color:var(--color-lane-subtle)
  }
  .help-form .impact-boxes .cell label:hover {
    background: var(--color-lane);
    color:var(--color-pop)
  }
  .input-box .content-label{
    font-size: 1rem;
    margin: 0;
    line-height:1;
  }
  .input-box .content{
    font-weight: 800;
    margin: 0;
  }
  .input-box .content2{
    font-size:.9em;
    font-weight:400;
    margin:0;
  }
  .box-verified-profile {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  .profile-img-square {
    background: var(--color-user);
    width: 2em;
    height: 2em;
    font-size: 3em;
  }
  fieldset{
    padding: 1em;
    border: 1px dashed var(--color-lane);
    margin:1em 0;
    position: relative;
    transition: all .5s ease;
  }
  .add-student{
    text-align: center;
    width: 100%;
    padding: 1em;
    margin:1em auto;
    background:var(--color-lane);
    border-radius: 3px;
    box-shadow: var(--shadow-standard-y);
    transition:all .5s ease;
  }
  .add-student:hover{
    cursor:pointer;
    box-shadow: var(--shadow-standard-y-h);
    background: var(--color-bright-2);
  }
  legend {
    font-size: 1.25em;
    font-weight: 600;
  }
  fieldset:hover{
    background: var(--color-chrome);
  }
  #button-add-student{
    width: 80%;
    margin: 0 auto;
    display: block;
    background:var(--color-bright-2);
    transition: all .5s ease;
    margin-bottom:1em;
  }
  #button-add-student:hover{
    background:var(--color-lane-subtler);
  }
  .pasteExcel{
    width: 80%;
    margin: 0 auto;
    display: block;
    background:var(--color-pop);
    transition: all .5s ease;
    margin-bottom:1em;
  }
  .pasteExcel:hover{
    background:var(--color-lane-subtler);
  }
  .pasteExcel:focus,
  .pasteExcel:active{
    background:var(--color-pop-h);
  }
  textarea{
    resize: vertical;
  }
  .user-info{
    background: var(--color-lane);
    padding: 1em;
    display: flex;
    flex-direction: column;
    align-items: center;
    border-radius: 3px;
  }
  .user-info #full-name{
    font-weight:600;
    font-size:1.25em;
  }
  .user-info p{
    margin-bottom:.25em;
  }
  .user-info #verified{
    margin-bottom:.5em;
  }
  .toc a {
    padding: 1em;
    display: flex;
    margin: .5em 0;
    text-align: center;
    color: var(--color-body-text);
    align-items: center;
    transition:all .5s ease;
    background: transparent;
    border:1px dashed var(--color-lane);
  }
  .toc a:hover {
    background:var(--color-lane-subtle)
  }
  .toc a.active{
      background: var(--color-chrome);
      color: var(--color-body-pop);
      font-weight: 600;
      border:1px solid var(--color-chrome);
      box-shadow:var(--shadow-standard-y);
      border-left: 4px solid var(--color-pop);
      padding-left:1.25em;
  }
  .toc a.done{
      background: var(--color-lane);
      color: var(--color-body-text);
      font-weight: 600;
      border:1px solid var(--color-lane);
  }
  .toc-item.sub{
    margin-left:2em;
    position:relative;
  }
  .toc-item.sub:before{
    content: '';
    border-left: 1px dashed var(--color-lane);
    border-bottom: 1px dashed var(--color-lane);
    position: absolute;
    left: -1em;
    top: -.5em;
    width: 1em;
    height: calc(50% + .5em);
    transition:all .5s ease;
  }
  .toc-item.sub:hover:before{
    border-color:var(--color-lane-subtle)
  }
  .toc-item.sub.last:before{
    content: '';
    top: calc(-50% - .5em);
    height: calc(100% + .5em);
  }
  .help-form {
    background:var(--color-chrome);
    color:var(--color-body-text);
    padding:1em 2em;
    margin-bottom:1em;
    border-radius:3px;
    box-shadow: var(--shadow-standard-y);
  }

  .form-nav{
    display:flex;
    justify-content: space-between;
  }
  .form-nav-button{
    background: var(--color-pop);
    color: var(--color-light);
    padding: .5em 1em;
    margin-top: .9em;
    transition:all .5s ease;
  }
  .form-nav-button:hover{
    background:var(--color-pop-h)
  }
  .form-nav-button.disabled{
    visibility: hidden;
    user-select: none;

  }
  .carousel-cell a{
    color:var(--color-pop);
    text-decoration:underline;
  }
  .carousel-cell a:hover{
    color:var(--color-pop-h)
  }
  .form-label{
    font-weight:600;
  }
  .form-label-help{
    font-size:.875rem;
    margin-bottom:0;
    font-style: italic;
  }
  .box-links{
    display: flex;
    justify-content: space-around;
    align-items: center;
    margin:1em 0;
  }
  .box-links a{
    padding: 1em;
    text-decoration: none;
    transition: all .5s ease;
    margin: 1em;
    text-align: center;
    border: 2px solid var(--color-pop);
    background: var(--color-light);
    color: var(--color-pop);
    border-radius: 3px;
  }
  .boundmap{
    display: none;
  }
  .box-links a:hover{
    background-color: var(--color-pop);
    color:var(--color-light);
  }
  .tos-content h1 {
      font-family: 'Roboto', Sans-Serif;
      font-weight: 800;
      font-Size: 2.5em;
      text-transform: capitalize;
      line-height: 1.2;
      padding-bottom: .25em;
      color:var(--color-pop);
    }
    .tos-head{
      background-color: var(--color-pop);
      height:300px;
    }
    .tos-content{
      background: var(--color-body);
      margin-top: -250px;
      padding: 2em;
      box-shadow: 0px 0px 15px rgba(0,0,0,.1);
    }
    .tos-section p{
      background: var(--color-chrome);
      padding: 2em;
      margin: 1em 0;
      box-shadow: 0px 0px 0px rgba(0,0,0,.1);
      border-radius:3px;
      transition:all 1s ease;
    }
    .tos-section p:hover,.tos-section p:focus{
      box-shadow: 0px 0px 8px rgba(0,0,0,.1);
    }
    .tos-section{
      margin-bottom: 1em;
    }
    .site-wrapper{
      background:var(--color-lane)
    }
    .tos-section h2{
      font-family: 'Roboto', Sans-Serif;
    font-weight: 600;
    font-Size: 1.5em;
    text-transform: capitalize;
    line-height: 1;
    color: var(--color-body-text);
    }
    .tos-lead{
      font-weight: 600;
      position: relative;
      padding: 2em 0;
    }
    .tos-lead:before{
      height: 2px;
      content: '';
      background: var(--color-pop);
      position: absolute;
      width: 10%;
      top:0;
    }
    .signed{
      font-family: 'Homemade Apple', cursive;
      font-size: 1.8em;
      text-decoration: underline;
      text-align: center;
      margin: 0;
    }
    .dated{
      text-align: center;
      font-weight: 600;
      font-size: .875em;
    }
    .name-drop{
      color:var(--color-pop);
      transition: all .5s ease;
    }
    .name-drop:hover{
      color:var(--color-pop-h)
    }

    #nameSetter:focus{
      outline:none;
    }
    #button-submit:disabled{
      background-color:var(--color-lane);
      cursor:not-allowed;
      box-shadow:none;
      color:var(--color-body-subtitle);
      outline:none;
    }
    #nameSetter #setName, #button-submit{
      width: 100%;
      text-align: center;
      background: var(--color-pop);
      height: 3em;
      color: var(--color-light);
      cursor: pointer;
      outline: none;
      box-shadow: var(--shadow-standard-y);
      transition: background .5s ease;
    }
    #nameSetter #setName:hover{
      background: var(--color-pop-h);
    }
    #nameSetter input{
      background: var(--color-body);
      color: var(--color-body-text);
    }
    #nameSetter label{
      font-family: 'Roboto', Sans-Serif;
      font-weight: 600;
      font-Size: .875em;
    }
    #nameSetter p{
      font-weight: 600;
      position: relative;
      padding: .5em 0;
    }
    #nameSetter h2{
      font-family: 'Roboto', Sans-Serif;
      font-weight: 600;
      font-Size: 1.5em;
      text-transform: capitalize;
      line-height: 1;
      color: var(--color-body-text);
    }
    #readySign{
        background: var(--color-chrome);
        padding: 1em;
        border-radius: 3px;
        border: 1px dashed var(--color-pop);
      }
    .recaptcha{
      font-size: 0.75rem;
      margin-top: 1em;
      color: var(--color-body-subtitle);
      text-align: right;
    }
    .agreer{
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 1em 0 .875em 0;
    }
    .agreer label{
      font-weight: 800;
    }
    #agree,#GuardianAgree{
      width:2em;
      height:2em;
      margin:0;
    }
    #agree:disabled + label{
      color: var(--color-body-subtitle);
    }
    #sigBlock{
        display:none;
    }
    #sigBlock label{
      font-family: 'Roboto', Sans-Serif;
      font-weight: 600;
      font-Size: .875em;
    }
    .name-error{
      color:var(--color-bright-4);
      text-align: center;
      display:none;
    }
    .error-text{
      color:var(--color-bright-4);
      text-align: center;
      display:none;
    }
    .reveal{
      border: none;
      border-radius: 3px;
    }
    .sublabel{
      font-size: .875em;
      font-style: italic;
      color: var(--color-body-subtitle);
    }
    #age{
      display:none;
    }
    #age + label{
      text-align: center;
      color: var(--color-pop);
      margin: .5em auto;
      position: relative;
      width: 100%;
    }
    #age + label:hover{
      color:var(--color-pop-h);
      text-decoration: underline;
    }
    #age:disabled + label{
      color: var(--color-body-subtitle);
      cursor: not-allowed;
    }
    #age:disabled + label:hover{
      color: var(--color-body-subtitle);
      text-decoration: none;
    }
    #age:checked + label:before {
      content: "\f2f7";
      color: var(--color-bright-2);
      font-family: "Font Awesome 5 Pro";
      font-weight: 900;
      margin-right: .5em;
    } 
    fieldset{
      border-top: 1px solid var(--color-lane);
      margin: 1em 0;
    }
    legend{
      font-size: 1.25em;
      font-weight: 600;
      text-align: center;
      color: var(--color-pop);
    }
    h3{
      margin-top: 2em;
    font-weight: 600;
    font-size: .875rem;
    }
    .error-text{
      font-size: .875em;
      color:var(--color-bright-4);
    }
    .dateWarningNote{
        background: var(--color-body);
        color: var(--color-body-text);
        padding: .5em;
        text-align: center;
        border: 1px dashed var(--color-lane-subtler);
        transition: all .5s ease;
    }
    @media screen and (max-width: 39.9375em) {
      .grid-container.grid-x.grid-margin-x {
        margin: auto;
        padding: 0;
      }
      .help-form{
        padding: 0;
      }
      fieldset{
        border: none;
      }
      h1{
        text-align: center;
      }
    }
    @media print, screen and (min-width: 64em){
      .tos-terms-column{
        max-height: 65vh;
        overflow: auto;
        margin-top: -15em;
        position: relative;
      }
      .tos-terms-column::after {
        content: '';
        width: 100%;
        position: absolute;
        bottom: 0;
        height: 20px;
        transition: all .5s ease;
        animation: shadow 3s ease-in-out infinite;
      }
      .tos-terms-column.scrolled::after {
        animation:none;
        box-shadow: inset 0 0 0 0 rgba(0,0,0,.3);
      }

      #readySign{
        display:none;
      }
      
      .tos-ready{
        order:2
      }
      .tos-terms-column{
        order:3
      }
      .simplebar-scrollbar:before {
        opacity:.2;
      }
      .simplebar-scrollbar.waiting:before{
        animation: barwait 5s ease-in-out infinite;
      }
    }
    @keyframes shadow {
    0%   { box-shadow: inset 0 -8px 15px -8px rgba(0,0,0,.2);}
    50%  { box-shadow: inset 0 -8px 10px -8px rgba(0,0,0,.3);}
    100% { box-shadow: inset 0 -8px 15px -8px rgba(0,0,0,.2);}
  }
    @keyframes barwait {
      0%   {opacity:.1;transform:translateY(0)}
      50%  {opacity:.3;transform:translateY(20px)}
      100% {opacity:.1;transform:translateY(0)}
    }
    .card-list li{
      display: flex;
      background-color: var(--color-body);
      padding: 1em;
      margin: .5em;
      border-radius: 3px;
      box-shadow: var(--shadow-standard-y);
      transition: all .5s ease;
    }
    .card-list li:hover,.card-list li:focus,.card-list li:active{
      background-color: hsl(192, 68%, 95%);
      box-shadow: var(--shadow-standard-y-h);
    }
    .card-list li span i{
      font-size: 2em;
      width:4em;
      text-align: center;
    }
    .card-list li span:first-of-type{
      display: flex;
      justify-content: center;
      align-items: center;
      margin-right: .5em
    }
    .help-form .impact-boxes .cell input:checked + label {
      background-color: hsl(192, 68%, 95%);
      color: var(--color-body-text);
      border-color: var(--color-bright-5);
      border-left-width: 6px;
    }
    #gobacktext {
      text-align: right;
      display: block;
      margin-top: -.875em;
      margin-bottom: 1em;
      font-size: .875em;
    }
    .help-form h3{
      margin-top:0;
    }
  </style>
  <script defer type="text/javascript" src="/js/pages/commencement-virtual.js"></script>
</head>
<%- include('../../partials/layout/top.ejs'); %>

<div class="request-page">
  <div class="grid-container fluid">
    <div class="grid-container grid-x grid-margin-x" style="margin:auto;">
      <div class='cell small-12 medium-12 large-12'>
        <h1>May 2021 Commencement Virtual Participants</h1>

        <% if(commencement){%>
          <% if(commencement.fields.find(f => f.name === 'Ceremony1Response')['value'] == "I will attend the virtual ceremony"|| commencement.fields.find(f => f.name === 'Ceremony2Response')['value'] == "I will attend the virtual ceremony"){%>
          <% 
          //Vars 
          const validDate = moment().isBetween(moment(new Date(commencement.fields.find(f => f.name === 'VirtualStartDate')['value'])).utc().utcOffset(-5),moment(new Date(commencement.fields.find(f => f.name === 'VirtualEndDate')['value'])).utc().utcOffset(-5))
          %>
          <% //Check Date is Valid 
          if(validDate){%>
            <%if(commencement.fields.find(f => f.name === 'VirtualStatus')['value'] != "Complete"){%>
              <form id="virtualForm">
                <input id="status" type="hidden" style="display:none" value="<%= commencement.fields.find(f => f.name === 'Status')['value']%>">
                <input id="busObRecId" type="hidden" style="display:none" value="<%-commencement.busObRecId%>">
                <input id="busObPublicId" type="hidden" style="display:none" value="<%-commencement.busObPublicId%>">
              <div class="grid-container grid-x grid-margin-x align-center" style="margin:auto;">
                <div class='cell small-12 medium-4 large-3 hide-for-small-only'>
                  <% if (locals.user && user.id && locals.userAttributes) { %>

                      <div class="user-info" style="text-align: center;">
                        <div class="profile-img-square" style="background-image:url('/img/ico-intro.svg');"></div>
                        <p id="verified"><i class="far fa-badge-check color-bright-2"></i> Verified User</p>
                          <p id="full-name"><%=commencement.fields.find(f => f.name === 'FirstName')['value']%> <%=commencement.fields.find(f => f.name === 'LastName')['value']%></p>
                          <p id="wpi-id"><%=commencement.fields.find(f => f.name === 'WPIID')['value']%></p>
                          <p id="wpi-email"><i class="fas fa-envelope-square"></i> <%=commencement.fields.find(f => f.name === 'WPIEmail')['value']%></p>
                      </div>
                  <% } %>

                </div>
                <div class='cell small-12 medium-10 large-9'>


                <div class="help-form" id="commenceForm">
                  
                    <p>Based upon your response to the commencement rsvp our records indicate that you have chosen to attend at least one ceremony virtually. In order to help personalize the ceremony, WPI would like to offer you the opportunity to submit a quote and photo.</p>
                    <fieldset>
                      <legend>Photo</legend>
                      <p>Participating graduates can upload a photo using any of the following options (if no photo is uploaded, the student ID photo will be used if available). The photo must show the graduate's face clearly and should reflect the celebratory yet solemn tone of a graduation ceremony. WPI reserves the right to not use any photo submission that is inappropriate or does not follow these guidelines.</p>
                      <div class="grid-x grid-margin-x align-center">
                        <div class='cell small-12 medium-6'>
                          <p>A 4x4 or 1200x1200 pixel photo, 300 dpi (highest resolution possible), in JPG or PNG format, no more than 5MB.</p>
                          <p style="font-weight:600">Recommended photo options:</p>
                          <ul>
                            <li>A headshot style photo of you wearing a cap and gown</li>
                            <li>A photo of you in your regalia alongside a mentor or special person in your life</li>
                            <li>A photo of you in your regalia being hooded by a mentor or special person in your life</li>
                            <li>A headshot style photo of you in professional attire</li>
                          </ul>
                        </div>
                        <div class='cell small-12 medium-6' style="display: flex;justify-content: center;align-items: center;flex-direction: column;background: var(--color-body);">
                          <img id="imagePreview" alt="your image" height="100" style="display:none;margin-bottom:1em;">

                          <label for="photoFile" class="button">Upload Photo</label>
                          <input type="file" id="photoFile" name="photoFile" class="show-for-sr">
                          <p id="photoError" class="error-text" style="display: none;"></p>

                        </div>
                      </div>
                    </fieldset>

                    <fieldset>
                      <legend>Quote</legend>
                      <p>You may also provide a quote to appear alongside your photo during the ceremony. The max length for quotes is 260 characters or about 40 words. We will be reviewing quotes for appropriateness.</p>
                      <div class="grid-x grid-margin-x align-center">
                        <div class='cell small-12 medium-12'>
                          <textarea id="quote" maxlength="260"></textarea>
                          <p id="lenCounter" style="text-align: right;font-size:.8em;color:var(--color---color-body-subtitle)"></p>

                        </div>
                      </div>
                    </fieldset>
                    <button id="button-submit-help-form" class="button-submit">Submit Commencement Virtual Details Form</button>
                    <p id="errorBlock" class="error error-text" style="display:none;">You must select a choice before submitting</p>
                    
                    <p style="font-size: 0.75rem;margin-top: 1em;color: var(--color-body-subtitle);">This site is protected by reCAPTCHA and the Google <a href="https://policies.google.com/privacy">Privacy Policy</a> and <a href="https://policies.google.com/terms">Terms of Service</a> apply.</p>
                </div>

                </div>
              </div>
            </form>
            <%}else{%>
            <!-- Already Completed -->
            <div class="note note-warning" style="background: hsl(192, 68%, 95%);">
              <div class="note-title"><i class="fad fa-info-circle color-bright-5"></i> It looks like you have already completed this form</div>
              <div class="note-message">If you are looking to change your photo or quote, please contact <a href="mailto:commencement@wpi.edu" target="_blank">The Commencement Team</a> </div>
            </div>
            <%}%>

          <%}else{%>
            <!-- Deadline Issue -->
            <div class="note note-warning" style="background: hsl(192, 68%, 95%);">
              <div class="note-title"><i class="fad fa-info-circle color-bright-5"></i> Deadline Passed</div>
              <div class="note-message">This form is closed and past its deadline.</div>
            </div>
          <%}%>

          <%}else{%>
          <!-- No Commencement Virtual Choices -->
          <div class="note note-warning" style="background: hsl(192, 68%, 95%);">
            <div class="note-title"><i class="fad fa-info-circle color-bright-5"></i> No Virtual Ceremony</div>
            <div class="note-message">Your current RSVP does not include a virtual Ceremony, so this form is unable to display options for the virtual ceremony..</div>
          </div>
        <%}%>
        <%}else{%>
          <!-- No Commencement Record -->
          <div class="note note-warning" style="background: hsl(192, 68%, 95%);">
            <div class="note-title"><i class="fad fa-info-circle color-bright-5"></i> No Ceremony Record</div>
            <div class="note-message">You do not have a ceremony Record assignment for May 2021 Commencement.<br> Please contact <a href="mailto:commencement@wpi.edu" target="_blank">The Commencement Team</a> to inquire about this error.</div>
          </div>
        <%}%>
      </div>
    </div>
  </div>
</div>

      


<%
const toasts = [
  {
    id: 'toast-save-success',
    type: 'success',
    title: 'Success',
    message: 'Your Commencement Virtual Participant has been updated.',
    show: false
  },
  {
    id: 'toast-save-error',
    type: 'error',
    title: 'Whoops',
    message: 'Something went wrong trying to update your  Virtual Participant',
    show: false
  }
];
%>
<%- include('../../partials/components/toaster.ejs', { toasts }); %>

<%- include('../../partials/layout/bottom.ejs'); %>
</html>
